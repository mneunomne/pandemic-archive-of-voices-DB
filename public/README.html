<h1 id="the-pandemic-archive-of-voices---database--api">The Pandemic Archive of Voices - Database &amp; API</h1>
<h2 id="description">Description</h2>
<p>The Pandemic Archive of Voices is an audio archive constituted by 24 different speakers who contributed 185 audios in 18 different languages. Each of these audios represents a word or expression in the speaker&#39;s native language that would translate their own individual experience of the current context of the pandemic.</p>
<p>This repository was created especifically to manage the installation project based on this database, but not exclusivelly.</p>
<p>It consists of:</p>
<ul>
<li>Database API</li>
<li>Content Manager</li>
<li>Contribution Form</li>
<li>Local server to conntect with the installation API</li>
</ul>
<h2 id="api-url">API URL</h2>
<p><code>https://pandemic-archive-of-voices.herokuapp.com/api/</code></p>
<h2 id="dependencies">Dependencies</h2>
<ul>
<li><a href="https://mongoosejs.com/docs/">Mongoose</a> Node library dealing with <a href="https://www.mongodb.com/">MongoDB</a></li>
<li><a href="https://aws.amazon.com/s3/">Amazon S3</a></li>
<li><a href="https://socket.io/">Socket.io</a></li>
<li><a href="https://www.npmjs.com/package/node-osc">node-osc</a></li>
<li><a href="https://www.npmjs.com/package/ffmpeg">node-ffmpeg</a></li>
<li><a href="http://sox.sourceforge.net/">SoX</a> for audio conversion from <code>.ogg</code> to <code>.wav</code> and <code>.wav</code>.</li>
<li><a href="https://opus-codec.org/downloads/">opus-tools</a> for Opus <code>.ogg</code> file conversion.</li>
</ul>
<h2 id="api">API</h2>
<ul>
<li><p><strong>Get all database data</strong></p>
<p><em>Returns whole JSON Object containing all audio objects</em>  </p>
<p><code>/api/data</code></p>
</li>
<li><p>*<strong>Get speaker&#39;s audios by speaker&#39;s id</strong></p>
<p><em>Returns all audio objects from speaker</em>  </p>
<p><code>/api/speaker_id/:id</code></p>
</li>
<li><p>*<strong>Get speaker&#39;s audios by speaker&#39;s id</strong></p>
<p><em>Returns all spakers who <strong>contain</strong> the <code>:name</code> string</em></p>
<p><code>/api/speaker/:name</code></p>
</li>
<li><p><strong>Get audio by id</strong></p>
<p><em>Returns specific audio object from its id</em>  </p>
<p><code>/api/audio_id/:id</code></p>
</li>
<li><p><strong>Get audios by text</strong></p>
<p><em>Returns all audios that <strong>contain</strong> the <code>text</code> in the transcription value <code>text</code> in audio object</em></p>
<p><code>/api/audio_id/:text</code></p>
</li>
<li><p><strong>Get audios by language name</strong></p>
<p><em>Returns all audios that <strong>contain</strong> the <code>lang_name</code> in the <code>name</code> paramenter inside <code>lang</code> in audio object</em></p>
<p><code>/api/audio_lang_name/:lang_name</code></p>
</li>
<li><p><strong>Get audios by audio text</strong></p>
<p><em>Returns all audios that <strong>contain</strong> the <code>lang_code</code> in the <code>code</code> paramenter inside <code>lang</code> in audio object</em></p>
<p><code>/api/audio_lang_code/:lang_code</code></p>
</li>
<li><p><strong>POST new audio</strong></p>
<p><em>Submits new audio to the database, restrited use</em></p>
<p><code>/api/audio</code></p>
<pre><code class="language-Javascript">{
  id: String,
  data: Blob,
  languageInput: String,
  lang_other: String,
  text: String,
  timestamp: Int
}
</code></pre>
</li>
</ul>
<h2 id="content-manager">Content Manager</h2>
<p>Live update content manager</p>
<p><img src="https://user-images.githubusercontent.com/4967860/137624208-6598e592-0325-41b5-b965-273a0b5de319.PNG" alt="db_manager"></p>
<h2 id="contribution-form">Contribution Form</h2>
<p>Contribition form</p>
<p><img src="https://user-images.githubusercontent.com/4967860/137624225-b6dff4d3-d174-4f1d-bcfa-34f710e512ba.jpg" alt="photo_5"></p>
<h2 id="to-do">To Do</h2>
<ul>
<li>Restricted use of content manager</li>
<li>Restricted use of contribution form</li>
<li>Clean old code</li>
<li>Fix contribution form errors on iPhone devices</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li><p>About converting Opus <code>.ogg</code> files used by telegram voice messages: <a href="https://stackoverflow.com/questions/22322372/sox-doesnt-work-with-opus-audio-files">SoX doesn&#39;t work with Opus Audio files</a></p>
</li>
<li><p>Sample conversion on <a href="http://sox.sourceforge.net/">SoX</a> <a href="https://stackoverflow.com/questions/23980283/sox-resample-and-convert">SoX resample and convert</a></p>
</li>
</ul>
<h2 id="license">License</h2>
<p><a href="https://opensource.org/licenses/MIT">MIT</a></p>
<style>body { font-family: 'Courier New'; }</style>